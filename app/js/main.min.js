function initConditions(e){var i,a=new Date,s=[6,23],n=[18,20],t=60*s[0]+s[1],g=60*n[0]+n[1],c=60*a.getHours()+a.getMinutes();switch(i=c>g-60&&c<=g+60?"dusk":c>t-60&&c<=t+60?"dawn":c>t+60&&c<=g-60?"day":"night",e){case"Partly Cloudy":case"Mostly Cloudy":case"Scattered Clouds":case"Overcast":case"Haze":case"Light Haze":case"Heavy Haze":setDayTimeCloudy(i);break;case"Clear":case"Calm":setDayTime(i);break;case"Shallow Fog":case"Patches of Fog":case"Partial Fog":case"Freezing Fog":case"Light Freezing Fog":case"Heavy Freezing Fog":case"Mist":case"Light Mist":case"Heavy Mist":case"Fog":case"Light Fog":case"Heavy Fog":makeImg("svg/fog.svg"),changeBg("img/fog.png");break;case"Hail":case"Light Hail":case"Heavy Hail":case"Ice Pellets":case"Hail Showers":case"Light Hail Showers":case"Heavy Hail Showers":case"Small Hail Showers":case"Light Small Hail Showers":case"Heavy Small Hail Showers":makeImg("svg/hail.svg"),changeBg("img/snow.png");break;case"Rain":case"Light Rain":case"Heavy Rain":case"Rain Mist":case"Light Rain Mist":case"Heavy Rain Mist":case"Light Rain Showers":case"Heavy Rain Showers":case"Rain Showers":case"Light Rain Showers":case"Heavy Rain Showers":case"Drizzle":case"Light Drizzle":case"Heavy Drizzle":makeImg("svg/rain.svg"),changeBg("img/rain.png");break;case"Squalls":case"Thunderstorm":case"Light Thunderstorm":case"Heavy Thunderstorm":case"Light Thunderstorms and Rain":case"Heavy Thunderstorms and Rain":makeImg("svg/storm.svg"),changeBg("img/storm.png");break;case"Light Thunderstorms and Snow":case"Heavy Thunderstorms and Snow":case"Thunderstorms and Ice Pellets":case"Freezing Rain":case"Light Freezing Rain":case"Heavy Freezing Rain":case"Snow Blowing Snow Mist":makeImg("svg/hail.svg"),changeBg("img/snow.png");break;case"Snow":case"Snow Showers":case"Light Snow Showers":case"Heavy Snow Showers":case"Snow Blowing Snow Mist":case"Light Snow Blowing Snow Mist":case"Heavy Snow Blowing Snow Mist":case"Snow Grains":case"Light Snow Grains":case"Heavy Snow Grains":case"Ice Crystals":case"Light Ice Crystals":case"Heavy Ice Crystals":case"Ice Pellets":case"Light Ice Pellets":case"Heavy Ice Pellets":makeImg("svg/snowflake.svg"),changeBg("img/snow.png");break;default:setDayTime(i)}}function makeImg(e){$("#imgContainer").html("<img src='"+e+"'/>")}function changeBg(e){$(".container-bg").css("background","url("+e+")")}function setDayTime(e){switch(e){case"dawn":case"day":makeImg("svg/sun.svg"),changeBg("img/sunny.png");break;case"dusk":case"night":makeImg("svg/moon.svg"),changeBg("img/night.png");break;default:makeImg("svg/sun.svg"),changeBg("img/sunny.png")}}function setDayTimeCloudy(e){switch(e){case"dawn":case"day":changeBg("img/partlysunny.png"),makeImg("svg/cloud.svg");break;case"dusk":case"night":makeImg("svg/cloudy-night.svg"),changeBg("img/cloudynight.png");break;default:makeImg("svg/cloud.svg"),changeBg("img/partlysunny.png")}}function getWeather(){var e="http://api.wunderground.com/api/4ba60343a7656feb/conditions/q/NY/New_York.json";$.getJSON(e,function(){}).done(function(e){var i,a,s,n,t,g,c,o;i=e.current_observation,i.dewpoint_f,a=i.temp_f,feelslike_f=i.feelslike_f,s=i.precip_today_in,n=i.relative_humidity,t=i.visibility_mi,g=i.wind_mph,c=i.wind_gust_mph,o=i.weather,weather_url=i.forecast_url,city=i.display_location.full,initConditions(o);var h=new initWeatherFeatures;h.initHumidity(n,"#humidity"),h.initPrecip(s,"#precip"),h.initWind(g,"#wind"),h.initWindGust(c,"#wind_gust"),h.initTemp(a,"#temp"),h.initTempF(feelslike_f,"#temp-f"),h.initVisibility(t,"#visibility"),h.initTag(weather_url,"#weather-url"),h.initCity(city,"#city")}).fail(function(){console.log("weather api not working"),initErrorMsg(" The Weather API has exceded number of hits allowed in a 24 hour period please check in 24 hours!")})}getWeather();var initWeatherFeatures=function(){function e(e,i){$(i).html("<h1>Humidity: "+e+"</h1>")}function i(e,i){$(i).html("<h1>Precipitation: "+e+"</h1>")}function a(e,i){$(i).html("<h1>Wind: "+e+"</h1>")}function s(e,i){$(i).html("<h1>Wind Gust: "+e+"</h1>")}function n(e,i){$(i).html('<h1 class="temp-txt">'+e+"<sup>&deg;</sup></h1>")}function t(e,i){$(i).html("<h1>Feels Like: "+e+"<sup>&deg;</sup></h1>")}function g(e,i){$(i).html("<h1>Visibility: "+e+"</h1>")}function c(e,i){$(i).html("<a href='"+e+"'target='_blank'><img src='img/wu_logo.png'/></a>")}function o(e,i){$(i).html("<h1>"+e+"</h1>")}function h(e){$("#temp").html("<h1>"+e+"</h1>")}return{initHumidity:e,initPrecip:i,initWind:a,initWindGust:s,initTemp:n,initTempF:t,initVisibility:g,initTag:c,initCity:o,initErrorMsg:h}};